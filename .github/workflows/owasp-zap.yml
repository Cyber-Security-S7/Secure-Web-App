name: OWASP ZAP Scan

on:
    workflow_dispatch:

jobs:
    zap_scan:
        runs-on: ubuntu-latest
        name: Scan the webapplication
        steps:
            - name: Checkout
              uses: actions/checkout@v4
              with:
                ref: main

            - name: ZAP Scan
              uses: zaproxy/action-full-scan@v0.11.0
              with:
                token: ${{ secrets.GITHUB_TOKEN }}
                docker_name: 'https://github.com/Cyber-Security-S7/Secure-Web-App/Dockerfile'
                target: 'localhost:8080'